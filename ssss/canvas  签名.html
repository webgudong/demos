<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		#test{
			background: gray;
		}
	</style>
</head>
<body>
	<canvas height="150" width="300" id="test">
		
	</canvas>
	<script type="text/javascript">
		var cavs=document.getElementById("test");
		if(cavs.getContext){
			var ctx=cavs.getContext("2d");
		}
		cavs.onmousedown=function(e){
			var e= e || event;
			if(cavs.setCapture){
				cavs.setCapture();
			}
			ctx.beginPath();
			ctx.moveTo(e.clientX-cavs.offsetLeft,e.clientY-cavs.offsetTop);
			cavs.onmousemove=function(e){
				
				var e= e || event;
		        ctx.save();
				ctx.strokeStyle="red";
				ctx.lineTo(e.clientX-cavs.offsetLeft,e.clientY-cavs.offsetTop);
				//console.log(e.clientX-e.offsetLeft,ctx.strokeStyle);
				ctx.stroke();
			
			}
			document.onmouseup=function(){
				document.onmousedown=null;
				cavs.onmousemove=null;
				if(cavs.releaseCapture){
					cavs.releaseCapture();
				}
					
				}
			
			

		}
		
			
	</script>
</body>

</html>